<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="STATE" height="1906.25px" preserveAspectRatio="none" style="width:953px;height:1906px;" version="1.1" viewBox="0 0 953 1906" width="953.125px" zoomAndPan="magnify"><title>&#22522;&#20110;tmux&#23398;&#20064;&#30340;&#23454;&#29616;&#36335;&#32447;&#22270;</title><defs><linearGradient id="gp32jgvbfvawb0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#EDF0F2"/><stop offset="100%" stop-color="#E9ECEF"/></linearGradient><linearGradient id="gp32jgvbfvawb1" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#59B6EC"/><stop offset="100%" stop-color="#2FA4E7"/></linearGradient><linearGradient id="gp32jgvbfvawb2" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#35638F"/><stop offset="100%" stop-color="#033C73"/></linearGradient></defs><g><g class="title" data-source-line="2"><rect fill="url(#gp32jgvbfvawb0)" height="48.2361" rx="4.1667" ry="4.1667" style="stroke:#BABDBF;stroke-width:1.0417;" width="291.5629" x="326.4085" y="20.8333"/><text fill="#2FA4E7" font-family="Verdana" font-size="20.8333" font-weight="bold" lengthAdjust="spacing" textLength="268.6462" x="337.8668" y="53.2369">&#22522;&#20110;tmux&#23398;&#20064;&#30340;&#23454;&#29616;&#36335;&#32447;&#22270;</text></g><path d="M102.8542,87.8194 L574.6393,87.8194 A4.1667,4.1667 0 0 1 578.806,91.9861 L578.806,122.5784 L98.6875,122.5784 L98.6875,91.9861 A4.1667,4.1667 0 0 1 102.8542,87.8194" fill="#FFC0CB"/><rect fill="none" height="113.268" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="480.1185" x="98.6875" y="87.8194"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="98.6875" x2="578.806" y1="122.5784" y2="122.5784"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="106.1015" x="285.696" y="109.756">&#24403;&#21069;&#29366;&#24577; (&#38169;&#35823;&#26550;&#26500;)</text><g id="Current.C1"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="148.1888" x="111.1875" y="135.0784"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="111.1875" x2="259.3763" y1="169.8374" y2="169.8374"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="116.9388" x="126.8125" y="157.015">Surface&#25317;&#26377;Terminal</text></g><g id="Current.C2"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="147.702" x="278.0938" y="135.0784"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="278.0938" x2="425.7958" y1="169.8374" y2="169.8374"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="116.452" x="293.7188" y="157.015">SessionCore&#21482;&#26377;&#24341;&#29992;</text></g><g id="Current.C3"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="124.556" x="444.875" y="135.0784"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="444.875" x2="569.431" y1="169.8374" y2="169.8374"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="93.306" x="460.5" y="157.015">attach&#19981;&#20999;&#25442;&#20869;&#23481;</text></g><path d="M210.8229,290.6632 L466.6706,290.6632 A4.1667,4.1667 0 0 1 470.8373,294.8298 L470.8373,325.4222 L206.6563,325.4222 L206.6563,294.8298 A4.1667,4.1667 0 0 1 210.8229,290.6632" fill="#FFA500"/><rect fill="none" height="392.5389" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="264.181" x="206.6563" y="290.6632"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="206.6563" x2="470.8373" y1="325.4222" y2="325.4222"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="193.7454" x="241.874" y="312.5997">Phase 4.1: SessionCore&#25152;&#26377;&#26435;&#36716;&#31227;</text><g id="P41.P41_1"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="242.306" x="219.1563" y="337.9222"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="219.1563" x2="461.4623" y1="372.6812" y2="372.6812"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="211.056" x="234.7813" y="359.8587">SessionCore.createOwnedTerminal()</text></g><g id="P41.P41_2"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="212.9832" x="233.8125" y="431.0055"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="233.8125" x2="446.7957" y1="465.7645" y2="465.7645"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="181.7332" x="249.4375" y="452.9421">SessionCore.createOwnedPTY()</text></g><g id="P41.P41_3"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="175.9003" x="252.3542" y="524.0993"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="252.3542" x2="428.2544" y1="558.8583" y2="558.8583"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="144.6503" x="267.9792" y="546.0358">SessionCore&#31649;&#29702;Shell&#36827;&#31243;</text></g><g id="P41.P41_4"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="132.221" x="274.1979" y="617.193"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="274.1979" x2="406.4189" y1="651.952" y2="651.952"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="100.971" x="289.8229" y="639.1296">&#20445;&#25345;Surface&#20860;&#23481;&#24615;</text></g><!--link P41_1 to P41_2--><g class="link" data-entity-1="P41_1" data-entity-2="P41_2" data-source-line="15" data-uid="lnk2" id="link_P41_1_P41_2"><path d="M340.3125,393.568 C340.3125,405.2138 340.3125,412.5784 340.3125,424.2659" fill="none" id="P41_1-to-P41_2" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,430.5159,344.4792,421.1409,340.3125,425.3076,336.1458,421.1409,340.3125,430.5159" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P41_2 to P41_3--><g class="link" data-entity-1="P41_2" data-entity-2="P41_3" data-source-line="16" data-uid="lnk3" id="link_P41_2_P41_3"><path d="M340.3125,486.6618 C340.3125,498.2972 340.3125,505.6618 340.3125,517.3597" fill="none" id="P41_2-to-P41_3" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,523.6097,344.4792,514.2347,340.3125,518.4013,336.1458,514.2347,340.3125,523.6097" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P41_3 to P41_4--><g class="link" data-entity-1="P41_3" data-entity-2="P41_4" data-source-line="17" data-uid="lnk4" id="link_P41_3_P41_4"><path d="M340.3125,579.7555 C340.3125,591.3909 340.3125,598.7555 340.3125,610.443" fill="none" id="P41_3-to-P41_4" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,616.693,344.4792,607.318,340.3125,611.4847,336.1458,607.318,340.3125,616.693" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><path d="M221.7604,772.7882 L455.7321,772.7882 A4.1667,4.1667 0 0 1 459.8987,776.9548 L459.8987,807.5472 L217.5938,807.5472 L217.5938,776.9548 A4.1667,4.1667 0 0 1 221.7604,772.7882" fill="#FFFF00"/><rect fill="none" height="392.5389" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="242.305" x="217.5938" y="772.7882"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="217.5938" x2="459.8987" y1="807.5472" y2="807.5472"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="155.3477" x="261.0724" y="794.7247">Phase 4.2: Surface&#26597;&#30475;&#22120;&#21270;</text><g id="P42.P42_1"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="176.0234" x="252.3021" y="820.0472"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="252.3021" x2="428.3254" y1="854.8062" y2="854.8062"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="144.7734" x="267.9271" y="841.9837">Surface.session_core&#24517;&#36873;</text></g><g id="P42.P42_2"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="164.0783" x="258.2708" y="913.1305"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="258.2708" x2="422.3491" y1="947.8895" y2="947.8895"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="132.8283" x="273.8958" y="935.0671">&#31227;&#38500;Surface.io.terminal</text></g><g id="P42.P42_3"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="220.43" x="230.0938" y="1006.2243"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="230.0938" x2="450.5237" y1="1040.9833" y2="1040.9833"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="189.18" x="245.7188" y="1028.1608">Surface&#20511;&#29992;SessionCore.terminal</text></g><g id="P42.P42_4"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="159.1604" x="260.7292" y="1099.318"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="260.7292" x2="419.8895" y1="1134.077" y2="1134.077"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="127.9104" x="276.3542" y="1121.2546">&#28210;&#26579;&#22120;&#25351;&#21521;SessionCore</text></g><!--link P42_1 to P42_2--><g class="link" data-entity-1="P42_1" data-entity-2="P42_2" data-source-line="25" data-uid="lnk5" id="link_P42_1_P42_2"><path d="M340.3125,875.693 C340.3125,887.3388 340.3125,894.7034 340.3125,906.3909" fill="none" id="P42_1-to-P42_2" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,912.6409,344.4792,903.2659,340.3125,907.4326,336.1458,903.2659,340.3125,912.6409" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P42_2 to P42_3--><g class="link" data-entity-1="P42_2" data-entity-2="P42_3" data-source-line="26" data-uid="lnk6" id="link_P42_2_P42_3"><path d="M340.3125,968.7868 C340.3125,980.4222 340.3125,987.7868 340.3125,999.4847" fill="none" id="P42_2-to-P42_3" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,1005.7347,344.4792,996.3597,340.3125,1000.5263,336.1458,996.3597,340.3125,1005.7347" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P42_3 to P42_4--><g class="link" data-entity-1="P42_3" data-entity-2="P42_4" data-source-line="27" data-uid="lnk7" id="link_P42_3_P42_4"><path d="M340.3125,1061.8805 C340.3125,1073.5159 340.3125,1080.8805 340.3125,1092.568" fill="none" id="P42_3-to-P42_4" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,1098.818,344.4792,1089.443,340.3125,1093.6097,336.1458,1089.443,340.3125,1098.818" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><path d="M219.9479,1254.9132 L457.5451,1254.9132 A4.1667,4.1667 0 0 1 461.7117,1259.0798 L461.7117,1289.6722 L215.7813,1289.6722 L215.7813,1259.0798 A4.1667,4.1667 0 0 1 219.9479,1254.9132" fill="#ADD8E6"/><rect fill="none" height="392.5389" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="245.9305" x="215.7813" y="1254.9132"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="215.7813" x2="461.7117" y1="1289.6722" y2="1289.6722"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="124.766" x="276.3635" y="1276.8497">Phase 4.3: &#31616;&#21270;attach</text><g id="P43.P43_1"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="209.643" x="235.4896" y="1302.1722"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="235.4896" x2="445.1326" y1="1336.9312" y2="1336.9312"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="178.393" x="251.1146" y="1324.1087">attachToSession(session_core)</text></g><g id="P43.P43_2"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="224.0555" x="228.2813" y="1395.2555"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="228.2813" x2="452.3367" y1="1430.0145" y2="1430.0145"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="192.8055" x="243.9063" y="1417.1921">surface.session_core = new_core</text></g><g id="P43.P43_3"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="181.9316" x="249.3438" y="1488.3493"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="249.3438" x2="431.2753" y1="1523.1083" y2="1523.1083"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="150.6816" x="264.9688" y="1510.2858">renderer.switchTerminal()</text></g><g id="P43.P43_4"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="133.5302" x="273.5417" y="1581.443"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="273.5417" x2="407.0718" y1="1616.202" y2="1616.202"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="102.2802" x="289.1667" y="1603.3796">forceFullRedraw()</text></g><!--link P43_1 to P43_2--><g class="link" data-entity-1="P43_1" data-entity-2="P43_2" data-source-line="35" data-uid="lnk8" id="link_P43_1_P43_2"><path d="M340.3125,1357.818 C340.3125,1369.4638 340.3125,1376.8284 340.3125,1388.5159" fill="none" id="P43_1-to-P43_2" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,1394.7659,344.4792,1385.3909,340.3125,1389.5576,336.1458,1385.3909,340.3125,1394.7659" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P43_2 to P43_3--><g class="link" data-entity-1="P43_2" data-entity-2="P43_3" data-source-line="36" data-uid="lnk9" id="link_P43_2_P43_3"><path d="M340.3125,1450.9118 C340.3125,1462.5472 340.3125,1469.9118 340.3125,1481.6097" fill="none" id="P43_2-to-P43_3" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,1487.8597,344.4792,1478.4847,340.3125,1482.6513,336.1458,1478.4847,340.3125,1487.8597" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><!--link P43_3 to P43_4--><g class="link" data-entity-1="P43_3" data-entity-2="P43_4" data-source-line="37" data-uid="lnk10" id="link_P43_3_P43_4"><path d="M340.3125,1544.0055 C340.3125,1555.6409 340.3125,1563.0055 340.3125,1574.693" fill="none" id="P43_3-to-P43_4" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="340.3125,1580.943,344.4792,1571.568,340.3125,1575.7347,336.1458,1571.568,340.3125,1580.943" style="stroke:#2FA4E7;stroke-width:3.125;"/></g><path d="M21.875,1759.1736 L584.7917,1759.1736 A4.1667,4.1667 0 0 1 588.9583,1763.3403 L588.9583,1793.9326 L17.7083,1793.9326 L17.7083,1763.3403 A4.1667,4.1667 0 0 1 21.875,1759.1736" fill="#90EE90"/><rect fill="none" height="113.268" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="571.25" x="17.7083" y="1759.1736"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="17.7083" x2="588.9583" y1="1793.9326" y2="1793.9326"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="112.8769" x="246.8949" y="1781.1101">&#30446;&#26631;&#29366;&#24577; (tmux&#27169;&#24335;)</text><g id="Target.T1"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="147.702" x="30.2083" y="1806.4326"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="30.2083" x2="177.9104" y1="1841.1916" y2="1841.1916"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="116.452" x="45.8333" y="1828.3691">SessionCore&#25317;&#26377;&#19968;&#20999;</text></g><g id="Target.T2"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="120.7626" x="196.8021" y="1806.4326"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="196.8021" x2="317.5647" y1="1841.1916" y2="1841.1916"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="89.5126" x="212.4271" y="1828.3691">Surface&#32431;&#26597;&#30475;&#22120;</text></g><g id="Target.T3"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="113.0976" x="336.0521" y="1806.4326"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="336.0521" x2="449.1497" y1="1841.1916" y2="1841.1916"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="81.8476" x="351.6771" y="1828.3691">attach&#31186;&#32423;&#23436;&#25104;</text></g><g id="Target.T4"><rect fill="url(#gp32jgvbfvawb1)" height="55.5923" rx="4.1667" ry="4.1667" style="stroke:#2683B9;stroke-width:1.0417;" width="111.4583" x="468.125" y="1806.4326"/><line style="stroke:#2683B9;stroke-width:1.0417;" x1="468.125" x2="579.5833" y1="1841.1916" y2="1841.1916"/><text fill="#343A40" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="80.2083" x="483.75" y="1828.3691">&#23436;&#25972;&#20250;&#35805;&#25345;&#20037;&#21270;</text></g><g class="entity" data-entity="GMN2" data-source-line="53" data-uid="ent0003" id="entity_GMN2"><path d="M507.6563,359.1528 L507.6563,482.7673 L471.0208,486.934 L507.6563,491.1007 L507.6563,614.7192 A4.1667,4.1667 0 0 0 511.8229,618.8858 L865.6824,618.8858 A4.1667,4.1667 0 0 0 869.849,614.7192 L869.849,365.4028 L859.4324,354.9861 L511.8229,354.9861 A4.1667,4.1667 0 0 0 507.6563,359.1528" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><path d="M859.4324,354.9861 L859.4324,363.3194 A2.0833,2.0833 0 0 0 861.5157,365.4028 L869.849,365.4028 L859.4324,354.9861" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="110.4675" x="519.1146" y="377.9699">Phase 4.1 &#37325;&#28857;&#65306;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="4.3945" x="519.1146" y="393.1615">&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="41.626" x="519.1146" y="408.3532">```zig</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="197.7051" x="519.1146" y="423.5448">// SessionCore&#30495;&#27491;&#25317;&#26377;Terminal</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="210.2295" x="519.1146" y="438.7365">pub const SessionCore = struct {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="270.1233" x="536.6927" y="453.9281">owned_terminal: Terminal,  // &#19981;&#20877;&#26159;&#24341;&#29992;&#65281;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="245.6543" x="536.6927" y="469.1198">owned_pty: PTY,           // &#19981;&#20877;&#26159;&#24341;&#29992;&#65281;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="249.0845" x="536.6927" y="484.3114">shell_pid: ProcessID,     // &#31649;&#29702;shell&#36827;&#31243;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="17.5781" x="519.1146" y="499.5031">&#160;&#160;&#160;&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="312.323" x="536.6927" y="514.6947">pub fn createSession(cols, rows) !*SessionCore {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="289.8926" x="554.2708" y="529.8864">const terminal = try Terminal.init(cols, rows);</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="212.207" x="554.2708" y="545.078">const pty = try PTY.spawn(shell);</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="142.7856" x="554.2708" y="560.2697">// SessionCore&#25317;&#26377;&#19968;&#20999;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="7.9346" x="536.6927" y="575.4613">}</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="13.6108" x="519.1146" y="590.653">};</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="23.8403" x="519.1146" y="605.8446">```</text></g><g class="entity" data-entity="GMN5" data-source-line="72" data-uid="ent0006" id="entity_GMN5"><path d="M496.7917,833.6736 L496.7917,964.8923 L460.2604,969.059 L496.7917,973.2257 L496.7917,1104.4316 A4.1667,4.1667 0 0 0 500.9583,1108.5983 L834.8715,1108.5983 A4.1667,4.1667 0 0 0 839.0382,1104.4316 L839.0382,839.9236 L828.6215,829.5069 L500.9583,829.5069 A4.1667,4.1667 0 0 0 496.7917,833.6736" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><path d="M828.6215,829.5069 L828.6215,837.8403 A2.0833,2.0833 0 0 0 830.7048,839.9236 L839.0382,839.9236 L828.6215,829.5069" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="110.4675" x="508.25" y="852.4907">Phase 4.2 &#37325;&#28857;&#65306;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="4.3945" x="508.25" y="867.6824">&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="41.626" x="508.25" y="882.874">```zig</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="125.8972" x="508.25" y="898.0657">// Surface&#21464;&#25104;&#26597;&#30475;&#22120;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="180.8411" x="508.25" y="913.2573">pub const Surface = struct {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="292.3767" x="525.8281" y="928.449">session_core: *SessionCore,  // &#24517;&#36873;&#65292;&#19981;&#20877;&#21487;&#36873;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="115.564" x="525.8281" y="943.6406">// &#31227;&#38500;: io: Termio</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="17.5781" x="508.25" y="958.8323">&#160;&#160;&#160;&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="209.4482" x="525.8281" y="974.0239">pub fn terminal(self) *Terminal {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="212.6892" x="543.4063" y="989.2156">return self.session_core.terminal;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="7.9346" x="525.8281" y="1004.4072">}</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="17.5781" x="508.25" y="1019.5989">&#160;&#160;&#160;&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="165.0452" x="525.8281" y="1034.7905">pub fn keyCallback(key) {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="216.0461" x="543.4063" y="1049.9822">self.session_core.writeInput(key);</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="7.9346" x="525.8281" y="1065.1738">}</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="13.6108" x="508.25" y="1080.3655">};</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="23.8403" x="508.25" y="1095.5571">```</text></g><g class="entity" data-entity="GMN8" data-source-line="92" data-uid="ent0009" id="entity_GMN8"><path d="M567.75,1361.3715 L567.75,1540.9797 A4.1667,4.1667 0 0 0 571.9167,1545.1463 L924.3235,1545.1463 A4.1667,4.1667 0 0 0 928.4902,1540.9797 L928.4902,1367.6215 L918.0735,1357.2048 L571.9167,1357.2048 A4.1667,4.1667 0 0 0 567.75,1361.3715" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><path d="M918.0735,1357.2048 L918.0735,1365.5382 A2.0833,2.0833 0 0 0 920.1568,1367.6215 L928.4902,1367.6215 L918.0735,1357.2048" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="110.4675" x="579.2083" y="1380.1886">Phase 4.3 &#37325;&#28857;&#65306;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="4.3945" x="579.2083" y="1395.3803">&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="41.626" x="579.2083" y="1410.5719">```zig</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="165.6738" x="579.2083" y="1425.7636">// &#31616;&#21270;&#30340;attach (&#23398;&#20064;tmux)</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="306.0791" x="579.2083" y="1440.9552">pub fn attachToSession(surface, session_core) {</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="310.8704" x="596.7865" y="1456.1469">surface.session_core = session_core;  // &#25351;&#38024;&#20999;&#25442;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="307.4829" x="596.7865" y="1471.3385">renderer.switchTerminal(session_core.terminal);</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="250.3784" x="596.7865" y="1486.5302">renderer.forceFullRedraw();  // &#31435;&#21363;&#37325;&#32472;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="160.6384" x="596.7865" y="1501.7218">// &#23436;&#25104;&#65281;&#23601;&#20687;tmux&#19968;&#26679;&#31616;&#21333;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="7.9346" x="579.2083" y="1516.9135">}</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="23.8403" x="579.2083" y="1532.1051">```</text></g><g class="entity" data-entity="GMN11" data-source-line="106" data-uid="ent0012" id="entity_GMN11"><path d="M625.8333,1741.1944 L625.8333,1890.4193 A4.1667,4.1667 0 0 0 630,1894.5859 L937.0882,1894.5859 A4.1667,4.1667 0 0 0 941.2549,1890.4193 L941.2549,1747.4444 L930.8382,1737.0278 L630,1737.0278 A4.1667,4.1667 0 0 0 625.8333,1741.1944" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><path d="M930.8382,1737.0278 L930.8382,1745.3611 A2.0833,2.0833 0 0 0 932.9215,1747.4444 L941.2549,1747.4444 L930.8382,1737.0278" fill="url(#gp32jgvbfvawb2)" style="stroke:#033C73;stroke-width:1.0417;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="62.5" x="637.2917" y="1760.0116">&#23454;&#29616;&#31574;&#30053;&#65306;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="4.3945" x="637.2917" y="1775.2032">&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="12.4939" x="637.2917" y="1790.3949">1.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="50" x="654.1801" y="1790.3949">&#22686;&#37327;&#37325;&#26500;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="161.9141" x="704.1801" y="1790.3949">&#65306;&#27599;&#20010;Phase&#37117;&#20445;&#25345;&#21521;&#21518;&#20860;&#23481;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="12.4939" x="637.2917" y="1805.5865">2.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="50" x="654.1801" y="1805.5865">&#29305;&#24615;&#24320;&#20851;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="162.5" x="704.1801" y="1805.5865">&#65306;&#29992;&#29615;&#22659;&#21464;&#37327;&#25511;&#21046;&#26032;&#26550;&#26500;&#21551;&#29992;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="12.4939" x="637.2917" y="1820.7782">3.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="50" x="654.1801" y="1820.7782">&#20805;&#20998;&#27979;&#35797;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="137.5" x="704.1801" y="1820.7782">&#65306;&#27599;&#27493;&#37117;&#35201;&#39564;&#35777;&#21151;&#33021;&#27491;&#24120;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="12.4939" x="637.2917" y="1835.9698">4.</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="61.1877" x="654.1801" y="1835.9698">&#23398;&#20064;tmux</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="194.8914" x="715.3678" y="1835.9698">&#65306;&#27599;&#20010;&#35774;&#35745;&#20915;&#31574;&#37117;&#21442;&#32771;tmux&#30340;&#20570;&#27861;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="4.3945" x="637.2917" y="1851.1615">&#160;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="62.5" x="637.2917" y="1866.3531">&#26368;&#32456;&#30446;&#26631;&#65306;</text><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="283.1299" x="637.2917" y="1881.5448">&#35753;Ghostty&#30340;attach&#20687;tmux&#19968;&#26679;&#31616;&#21333;&#12289;&#24555;&#36895;&#12289;&#21487;&#38752;</text></g><!--link Current to P41--><g class="link" data-entity-1="Current" data-entity-2="P41" data-source-line="47" data-uid="lnk11" id="link_Current_P41"><path d="M338.75,201.3194 C338.75,226.4028 338.75,251.4132 338.75,283.934" fill="none" id="Current-to-P41" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="338.75,290.184,342.9167,280.809,338.75,284.9757,334.5833,280.809,338.75,290.184" style="stroke:#2FA4E7;stroke-width:3.125;"/><text fill="#343A40" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="82.3914" x="345" y="251.147">&#23398;&#20064;tmux&#26550;&#26500;</text></g><!--link P41 to P42--><g class="link" data-entity-1="P41" data-entity-2="P42" data-source-line="48" data-uid="lnk12" id="link_P41_P42"><path d="M338.75,683.5694 C338.75,712.8819 338.75,736.8611 338.75,766.184" fill="none" id="P41-to-P42" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="338.75,772.434,342.9167,763.059,338.75,767.2257,334.5833,763.059,338.75,772.434" style="stroke:#2FA4E7;stroke-width:3.125;"/><text fill="#343A40" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50" x="345" y="733.272">&#36880;&#27493;&#37325;&#26500;</text></g><!--link P42 to P43--><g class="link" data-entity-1="P42" data-entity-2="P43" data-source-line="49" data-uid="lnk13" id="link_P42_P43"><path d="M338.75,1165.6944 C338.75,1195.0069 338.75,1218.9861 338.75,1248.2986" fill="none" id="P42-to-P43" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="338.75,1254.5486,342.9167,1245.1736,338.75,1249.3403,334.5833,1245.1736,338.75,1254.5486" style="stroke:#2FA4E7;stroke-width:3.125;"/><text fill="#343A40" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50" x="345" y="1215.397">&#31616;&#21270;&#26426;&#21046;</text></g><!--link P43 to Target--><g class="link" data-entity-1="P43" data-entity-2="Target" data-source-line="50" data-uid="lnk14" id="link_P43_Target"><path d="M319.6458,1647.8194 C315.6563,1688.6215 312.3678,1722.2344 309.3886,1752.7448" fill="none" id="P43-to-Target" style="stroke:#2FA4E7;stroke-width:3.125;"/><polygon fill="#2FA4E7" points="308.7813,1758.9653,313.8393,1750.0396,309.2874,1753.7816,305.5454,1749.2297,308.7813,1758.9653" style="stroke:#2FA4E7;stroke-width:3.125;"/><text fill="#343A40" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="50" x="322.0521" y="1697.5116">&#36798;&#25104;&#30446;&#26631;</text></g><!--link P43 to GMN8--><g class="link" data-entity-1="P43" data-entity-2="GMN8" data-source-line="92" data-uid="lnk10" id="link_P43_GMN8"><path d="M461.8854,1451.184 C497.0104,1451.184 532.1354,1451.184 567.2708,1451.184" fill="none" id="P43-GMN8" style="stroke:#2FA4E7;stroke-width:3.125;stroke-dasharray:7.2917,7.2917;"/></g><!--link GMN8 to GMN11--><g class="link" data-entity-1="GMN8" data-entity-2="GMN11" data-source-line="106" data-uid="lnk13" id="link_GMN8_GMN11"><path d="M757.25,1545.5903 C763.0313,1604.8611 770.4375,1680.6736 775.9167,1736.7257" fill="none" id="GMN8-GMN11" style="stroke:#2FA4E7;stroke-width:3.125;stroke-dasharray:7.2917,7.2917;"/></g><!--SRC=[bLRVRnD747w_ls8XBuaLZ7AN9qVjGwcAa2eHbRpm50vdavnmxgAxjToqGZfZd1yaZbCW24A80sr82erDcnQIu2H_JBrxvoV-XSxUtgtliA6jPSdds_bsPhwP-NRFaMayWr4Ms_aSras562I74QqTjuvNoKp-Uxh_idMqxMtSfVKjR_MD_wxX7P_HfwUAuX2TO7IUdZoWInNltblc5b5_- -4Jlz5WMs_Prjs1yqXtqAMyRMEJeBvHmxo5VbGGV4BejRmzgMSnMzvXcqjZs9unJ3qdG4C9E-muXcLUicnCgw_0bZRNlOTxmbADM-g4wDdfrc65BYwmoWiwNwRr8s6dARTbpAFJkeFHS7eeWs9xioKNzcRFIlx9Rzxk-m0sEZo4-gxQkZc5FugzWqjdRGplhXPCF15bqJyGmSU7_WDiTEnw3A5-0k7LdtjhyzUcSIxddptrzfObGeiZMcVFs4en99UMcq01StUbxN1W6qI6BbpuCkOnU9BlDFbEa- -6Uv2e0ebX8MixtkOoVR97Lnw5xbJKTnt2jGezAvzsH7BZMLxQitBRNOfmITgW7EqdlqGemqgJUBTmSxN7zjIjGPl4AU-29OXZXt-msWE8dwqiqBMVOa1f7v6dIl9KIPugoLCbUQeaJ-r9dfP1Njq5laJdXduqrFUjCJLDlihbFsexOJPcXR7rnmcC6aXBSkVqu1fzWKnS21ubAC4WZEm4jh6TTWe60OSVjxMMP6xIihFuctmkznsUiFL2p2mYJ9E4QP8mJHAcIS8qIPYM8CnxMcVR2v7CS6LYUyzfioeyZUds52OXQvTjZCrFJgjGczQX2n8Xi4CzMiSxRiXk5bOzTCRRlUyTxzBw2bjS4qO9KlZ2-f-jveRVu0FPEYf7Sp4MP1OfOpXS6IIqDiWj4525gq_OFHdKTjVO_avxeI9M97LH1x7DOxhuLk7TmrS49Hdadvv2U88-HJ4jYCpcB25hadk5W5CfgOS8jlVk77reRgHIi0BV6pTk_61CmSF5Yt6jz3PhRF_df7A3qMp-9ifQfaFYjj1i3h7pMHBM126BQzvuD8mP5Eqm6BZXyZrVOOyRGkO_D8i9s2oPoo0Gp47K-NmEvN2z79yr9W1bMrc8wyhNWn5AIAhJaTGG5FxmV2PD99GwchcibNC6aMqLd05qBXLFDCgFVmGDKOx00R7dPA9fmpH8VAEHBYIa6O8WrxGpgnTWsdcS2TjaLUAz7HhTXj_R8wAG2WmruXtGtGTga7Ad4zH_wOHGOAkFeRVae2GRG9Xq5p-kGnaKvq-KNvm37vehegAqse2_YanN70KPP5XXtrWzInOH3mgPcnn0gOZvH8riJFAsYRX9GXxbEJ4IOx7RnoqyTqdFvMxgsLlzy3oGsBjxqu9j47p5dCsJm7ha_rL8IzH7-tnzX2B0hKq85UhlICk08kFlEan4oGOJ9UfazOc39Fvt9F0EnsVx_gAuWYaHqxtFavwiIseagkjy4OwyrykqSi2PUF-uqo52a440w9lVQQdAauQHODllE2kLTKLGteFjcnOXrap0ixZjUlkFlFMT6CT3QRxsOgkzK1L2d4h1AcjKMuUlWjAqIoVY-WNt1xgsAcvV05Gvq5lY5p7QT6dv8022Jdch3VgY18C4MxBLNL1mzkYDa7-wrW0306k1rtAPBiwplvRzndhabPy7fHF_PR7zQiLl5Eczcbyw0LscXuS06mvWil2nKFtwgLz_JkSF847OW5Rl-6w9s_1xVd637QmheHwmJTTxloXEZuW7l_xhvMdB8MHEDbWFclzsY_JiTTkjyGUOuMVR7Rh_0G00]--></g></svg>