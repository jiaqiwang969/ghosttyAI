# CORE-001 ç¬¬äºŒå‘¨ä»»åŠ¡æ¸…å•
## c-tmux-specialist Week 2 Tasks

### ğŸ‘¤ è§’è‰²å®šä½
**ä¸“é•¿**: Cè¯­è¨€tmuxæ ¸å¿ƒå¼€å‘ï¼Œäº‹ä»¶å¾ªç¯ï¼Œç»ˆç«¯æ§åˆ¶  
**æœ¬å‘¨é‡ç‚¹**: äº‹ä»¶å¾ªç¯vtableåŒ–ï¼Œå¸ƒå±€ç®¡ç†callbacks

### ğŸ“‹ ä»»åŠ¡åˆ—è¡¨

## T-201: äº‹ä»¶å¾ªç¯vtableæŠ½è±¡ ã€é«˜ä¼˜å…ˆçº§ã€‘
**å·¥æœŸ**: 3å¤© (å‘¨ä¸€-å‘¨ä¸‰)  
**çŠ¶æ€**: å¾…å¼€å§‹

### è¾“å…¥æ–‡ä»¶åˆ†æ
```bash
# éœ€è¦åˆ†æçš„tmuxæºæ–‡ä»¶
/Users/jqwang/98-ghosttyAI/tmux/event.c
/Users/jqwang/98-ghosttyAI/tmux/server-loop.c  
/Users/jqwang/98-ghosttyAI/tmux/proc.c
```

### è¾“å‡ºäº¤ä»˜ç‰©
```
cache/week2/CORE-001/
â”œâ”€â”€ event_loop_backend.h      # äº‹ä»¶å¾ªç¯æŠ½è±¡æ¥å£
â”œâ”€â”€ event_loop_router.c       # äº‹ä»¶è·¯ç”±å®ç°
â”œâ”€â”€ event_callbacks.c         # å›è°ƒå‡½æ•°é›†åˆ
â””â”€â”€ tests/
    â””â”€â”€ test_event_loop.c     # äº‹ä»¶å¾ªç¯æµ‹è¯•
```

### å®ç°æ­¥éª¤
1. **å‘¨ä¸€ä¸Šåˆ**: åˆ†ætmuxäº‹ä»¶å¾ªç¯æœºåˆ¶
   - ç†è§£event_add/event_delå·¥ä½œåŸç†
   - æ¢³ç†æ‰€æœ‰äº‹ä»¶ç±»å‹(timer, io, signal)
   - ç¡®å®šéœ€è¦æŠ½è±¡çš„æ¥å£

2. **å‘¨ä¸€ä¸‹åˆ**: è®¾è®¡vtableç»“æ„
   ```c
   typedef struct event_backend_ops {
       int (*add)(struct event_base*, struct event*);
       int (*del)(struct event_base*, struct event*);
       int (*dispatch)(struct event_base*);
       int (*loop)(struct event_base*, int flags);
   } event_backend_ops_t;
   ```

3. **å‘¨äºŒå…¨å¤©**: å®ç°event_loop_router
   - ä¿æŒä¸libeventå…¼å®¹
   - æ”¯æŒcallbackæ¨¡å¼åˆ‡æ¢
   - çº¿ç¨‹å®‰å…¨è€ƒè™‘

4. **å‘¨ä¸‰ä¸Šåˆ**: æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
   - åŸºå‡†æµ‹è¯•å¯¹æ¯”åŸç”Ÿtmux
   - ç¡®ä¿æ€§èƒ½æŸå¤±<1%

### éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰eventæ“ä½œé€šè¿‡vtable
- [ ] Poll/select/kqueueç»Ÿä¸€æ¥å£  
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡(å·®å¼‚<1%)
- [ ] çº¿ç¨‹å®‰å…¨éªŒè¯
- [ ] 100%å‘åå…¼å®¹

### å…³é”®é£é™©
- libeventæ·±åº¦è€¦åˆå¯èƒ½éš¾ä»¥è§£è€¦
- æ€§èƒ½å¼€é”€éœ€è¦ä¸¥æ ¼æ§åˆ¶

---

## T-203: å¸ƒå±€ç®¡ç†callbacks ã€ä¸­ä¼˜å…ˆçº§ã€‘
**å·¥æœŸ**: 2å¤© (å‘¨å››-å‘¨äº”)  
**çŠ¶æ€**: å¾…T-202å®Œæˆ

### è¾“å…¥æ–‡ä»¶åˆ†æ
```bash
/Users/jqwang/98-ghosttyAI/tmux/layout.c
/Users/jqwang/98-ghosttyAI/tmux/layout-custom.c
/Users/jqwang/98-ghosttyAI/tmux/layout-set.c
```

### è¾“å‡ºäº¤ä»˜ç‰©
```
cache/week2/CORE-001/
â”œâ”€â”€ layout_callbacks.h        # å¸ƒå±€å›è°ƒæ¥å£
â”œâ”€â”€ layout_callbacks.c        # å¸ƒå±€å›è°ƒå®ç°
â”œâ”€â”€ pane_events.c            # çª—æ ¼äº‹ä»¶å¤„ç†
â””â”€â”€ tests/
    â””â”€â”€ test_layout.c        # å¸ƒå±€æµ‹è¯•
```

### å®ç°æ­¥éª¤
1. **å‘¨å››ä¸Šåˆ**: å¸ƒå±€äº‹ä»¶è¯†åˆ«
   - çª—æ ¼åˆ›å»º/é”€æ¯äº‹ä»¶
   - çª—æ ¼åˆ†å‰²/åˆå¹¶äº‹ä»¶
   - å°ºå¯¸è°ƒæ•´äº‹ä»¶

2. **å‘¨å››ä¸‹åˆ**: å›è°ƒæœºåˆ¶å®ç°
   ```c
   typedef struct layout_callbacks {
       void (*on_pane_create)(struct window_pane*);
       void (*on_pane_destroy)(struct window_pane*);
       void (*on_pane_resize)(struct window_pane*, u_int, u_int);
       void (*on_layout_change)(struct window*);
   } layout_callbacks_t;
   ```

3. **å‘¨äº”ä¸Šåˆ**: å¸ƒå±€åºåˆ—åŒ–
   - å¸ƒå±€çŠ¶æ€å¯¼å‡º
   - å¸ƒå±€æ¢å¤æœºåˆ¶

4. **å‘¨äº”ä¸‹åˆ**: é›†æˆæµ‹è¯•

### éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰å¸ƒå±€å˜åŒ–è§¦å‘callbacks
- [ ] çª—æ ¼æ“ä½œäº‹ä»¶å®Œæ•´
- [ ] å¸ƒå±€å¯åºåˆ—åŒ–/ååºåˆ—åŒ–
- [ ] ä¸T-202ç½‘æ ¼æ“ä½œååŒ

---

## ğŸ“… æ¯æ—¥è®¡åˆ’

### å‘¨ä¸€ (8/26)
- 09:00 - å‚åŠ å‘¨ä¼šï¼Œç¡®è®¤ä»»åŠ¡
- 10:00 - å¼€å§‹T-201ï¼Œåˆ†æevent.c
- 14:00 - è®¾è®¡event_backend_opsç»“æ„
- 16:00 - ç¼–å†™æ¥å£å¤´æ–‡ä»¶
- 17:00 - æäº¤è¿›å±•ï¼Œæ—¥æŠ¥

### å‘¨äºŒ (8/27)
- 09:00 - ç«™ä¼šåŒæ­¥
- 09:30 - å®ç°event_loop_routeræ ¸å¿ƒ
- 14:00 - å¤„ç†çº¿ç¨‹å®‰å…¨é—®é¢˜
- 16:00 - å•å…ƒæµ‹è¯•ç¼–å†™
- 17:00 - ä¸CORE-002åŒæ­¥æ¥å£

### å‘¨ä¸‰ (8/28)
- 09:00 - ç«™ä¼š
- 09:30 - æ€§èƒ½æµ‹è¯•setup
- 11:00 - è¿è¡Œbenchmarkå¯¹æ¯”
- 14:00 - æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚éœ€è¦ï¼‰
- 16:00 - å®ŒæˆT-201ï¼Œäº¤ä»˜ç»™INTG-001
- 17:00 - å‡†å¤‡T-203

### å‘¨å›› (8/29)
- 09:00 - ç«™ä¼š
- 09:30 - å¼€å§‹T-203å¸ƒå±€ç®¡ç†
- 11:00 - å®ç°layout_callbacks
- 14:00 - çª—æ ¼äº‹ä»¶å¤„ç†
- 16:00 - ä¸INTG-002åè°ƒcopy-mode
- 17:00 - è¿›å±•åŒæ­¥

### å‘¨äº” (8/30)
- 09:00 - ç«™ä¼š
- 09:30 - å¸ƒå±€åºåˆ—åŒ–å®ç°
- 11:00 - é›†æˆæµ‹è¯•
- 14:00 - Bugä¿®å¤
- 16:00 - å‘¨æ€»ç»“æ–‡æ¡£
- 17:00 - Demoå‡†å¤‡

## ğŸ”„ åä½œæ¥å£

### éœ€è¦ä»å…¶ä»–äººè·å–
- ARCH-001: äº‹ä»¶å¾ªç¯æ¶æ„ç¡®è®¤
- CORE-002: ç½‘æ ¼æ“ä½œæ¥å£(T-202)

### éœ€è¦æä¾›ç»™å…¶ä»–äºº
- INTG-001: event_loop_backend.h (å‘¨ä¸‰)
- INTG-002: layout_callbacks.h (å‘¨äº”)
- QA-001: æµ‹è¯•ç”¨ä¾‹è¯´æ˜

## ğŸ“Š é£é™©å’Œç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| libeventè§£è€¦å›°éš¾ | T-201å»¶æœŸ | ä¿ç•™libeventå…¼å®¹å±‚ |
| æ€§èƒ½é€€åŒ– | ä¸å¯æ¥å— | æå‰åšæ€§èƒ½åŸºå‡†æµ‹è¯• |
| æ¥å£å˜åŒ– | å½±å“ä¸‹æ¸¸ | å°½æ—©é”å®šæ¥å£è®¾è®¡ |

## âœ… å‘¨å®Œæˆæ ‡å‡†
- [ ] T-201å®Œæˆï¼Œæ€§èƒ½è¾¾æ ‡
- [ ] T-203å®Œæˆï¼Œæµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´
- [ ] 0ç¼–è¯‘è­¦å‘Š
- [ ] ä»£ç reviewé€šè¿‡

---

**è§’è‰²**: CORE-001 (c-tmux-specialist)  
**æ›´æ–°æ—¥æœŸ**: 2025-08-25